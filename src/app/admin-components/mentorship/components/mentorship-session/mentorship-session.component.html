<div class="min-h-screen px-6 py-12 max-w-6xl mx-auto bg-gray-900">
  <!-- Loading State -->
  <ng-container *ngIf="loading">
    <div class="flex flex-col items-center justify-center h-64">
      <i class="fas fa-spinner fa-spin text-4xl text-indigo-400 mb-4"></i>
      <p class="text-gray-400">Loading mentorship session...</p>
    </div>
  </ng-container>

  <!-- Error State -->
  <ng-container *ngIf="error">
    <div class="bg-red-900/30 border-l-4 border-red-500 p-4 mb-8 rounded-lg">
      <div class="flex items-center">
        <i class="fas fa-exclamation-circle text-red-400 mr-3 text-xl"></i>
        <h3 class="text-red-100 font-semibold">Error</h3>
      </div>
      <p class="text-red-200 mt-1">{{ error }}</p>
    </div>
  </ng-container>

  <!-- Content -->
  <div *ngIf="template && !loading && !error" class="animate-fade-in">
    <div class="flex items-start mb-8">
      <div class="bg-indigo-600/20 p-3 rounded-lg mr-4">
        <i class="fas fa-chalkboard-teacher text-indigo-300 text-2xl"></i>
      </div>
      <div>
        <h1 class="text-3xl font-bold text-white mb-1">{{ template.data.title }}</h1>
        <p class="text-gray-400">{{ template.data.description }}</p>
      </div>
    </div>

    <div *ngFor="let group of template.data.groups" class="mb-10 bg-gray-800/50 rounded-xl p-6 border border-gray-700 shadow-lg">
      <div class="flex items-center mb-4">
        <i class="fas fa-folder-open text-purple-300 mr-3"></i>
        <h2 class="text-xl font-semibold text-purple-200">{{ group.title }}</h2>
      </div>

      <p class="text-gray-500 mb-6 ml-8" *ngIf="group.description">
        <i class="fas fa-info-circle mr-2 text-gray-600"></i>{{ group.description }}
      </p>

      <div *ngFor="let field of group.fields" class="mb-6 ml-8">
        <div class="flex items-center mb-2">
          <label class="block text-sm text-indigo-300 font-medium">
            <i class="far fa-circle-question mr-2 text-indigo-400/70"></i>{{ field.label }}
          </label>
        </div>

        <ng-container [ngSwitch]="field.type">
          <!-- Text Input -->
          <div *ngSwitchCase="'text'" class="relative">
            <i class="fas fa-font absolute left-3 top-3 text-gray-500"></i>
            <input [(ngModel)]="formValues[group.key][field.key]"
              class="w-full pl-10 pr-3 py-2 bg-gray-700 text-white border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition placeholder-gray-500" />
          </div>

          <!-- Number Input -->
          <div *ngSwitchCase="'number'" class="relative">
            <i class="fas fa-hashtag absolute left-3 top-3 text-gray-500"></i>
            <input type="number" [(ngModel)]="formValues[group.key][field.key]"
              class="w-full pl-10 pr-3 py-2 bg-gray-700 text-white border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition placeholder-gray-500" />
          </div>

          <!-- Textarea -->
          <div *ngSwitchCase="'textarea'" class="relative">
            <i class="fas fa-align-left absolute left-3 top-3 text-gray-500"></i>
            <textarea [(ngModel)]="formValues[group.key][field.key]" rows="4"
              class="w-full pl-10 pr-3 py-2 bg-gray-700 text-white border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition placeholder-gray-500"></textarea>
          </div>

          <!-- Select -->
          <div *ngSwitchCase="'select'" class="relative">
            <i class="fas fa-caret-down absolute right-3 top-3 text-gray-500 pointer-events-none"></i>
            <select [(ngModel)]="formValues[group.key][field.key]"
              class="w-full px-3 py-2 bg-gray-700 text-white border border-gray-600 rounded-md appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition pr-8">
              <option *ngFor="let opt of field.options" [value]="opt">{{ opt }}</option>
            </select>
          </div>

          <!-- Date -->
          <div *ngSwitchCase="'date'" class="relative">
            <i class="far fa-calendar absolute left-3 top-3 text-gray-500"></i>
            <input type="date" [(ngModel)]="formValues[group.key][field.key]"
              class="w-full pl-10 pr-3 py-2 bg-gray-700 text-white border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition [color-scheme:dark]" />
          </div>

          <!-- Boolean -->
          <div *ngSwitchCase="'boolean'" class="relative">
            <i class="far fa-question-circle absolute left-3 top-3 text-gray-500"></i>
            <select [(ngModel)]="formValues[group.key][field.key]"
              class="w-full pl-10 pr-3 py-2 bg-gray-700 text-white border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
              <option [value]="true">Yes</option>
              <option [value]="false">No</option>
            </select>
          </div>

          <!-- Rating -->
          <div *ngSwitchCase="'rating'" class="pt-2">
            <div class="flex justify-between mb-2">
              <span class="text-xs text-gray-400">1 (Poor)</span>
              <span class="text-xs text-gray-400">5 (Excellent)</span>
            </div>
            <div class="flex items-center">
              <i class="fas fa-star text-yellow-400 mr-2"></i>
              <input type="range" min="1" max="5" [(ngModel)]="formValues[group.key][field.key]"
                class="w-full accent-indigo-500" />
            </div>
          </div>

          <!-- Table Field -->
          <div *ngSwitchCase="'table'" class="overflow-x-auto border border-gray-700 rounded-lg">
            <table class="min-w-full divide-y divide-gray-700 text-sm">
              <thead class="bg-gray-800">
                <tr>
                  <th *ngFor="let col of field.columns" class="px-4 py-3 font-medium text-indigo-300 text-left">{{ col.label }}</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-700">
                <tr *ngFor="let row of formValues[group.key][field.key]; let rowIndex = index" class="hover:bg-gray-700/50 transition">
                  <td *ngFor="let col of field.columns; let colIndex = index" class="px-4 py-3">
                    <input
                      [(ngModel)]="formValues[group.key][field.key][rowIndex][col.key]"
                      class="w-full px-3 py-2 bg-gray-800 text-white border border-gray-600 rounded-md focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 text-sm"
                    />
                  </td>
                </tr>
              </tbody>
            </table>

            <!-- Add Row Button -->
            <div class="mt-3">
              <button
                class="text-sm px-4 py-2 border border-indigo-500/50 text-indigo-300 rounded-md hover:bg-indigo-500/10 transition flex items-center"
                (click)="addTableRow(group.key, field.key, field.columns)"
              >
                <i class="fas fa-plus mr-2"></i>Add Row
              </button>
            </div>
          </div>
        </ng-container>
      </div>
    </div>

    <div class="flex justify-end mt-8">
      <button (click)="logValues()"
        class="px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-lg hover:scale-[1.02] transition-all shadow-lg hover:shadow-indigo-500/30 flex items-center">
        <i class="fas fa-paper-plane mr-2"></i> Submit Session
      </button>
    </div>
  </div>
</div>
